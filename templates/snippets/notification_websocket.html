<script type="text/javascript">
  (function () {
    const ws_scheme = window.location.protocol == "https:" ? "wss" : "ws";
    let ws_path
    if (window.location.protocol != "https:") {
      ws_path = `${ws_scheme}://${window.location.host}/`;
    } else {
      ws_path = `${ws_scheme}://${window.location.host}:8001/`;
    }

    const websocket = new WebSocket(ws_path);

    /*
    ###################### ON OPEN #######################
     */
    websocket.onopen = () => {
      console.log("Websocket onopen");
    }

    /*
    ###################### ON CLOSE #######################
     */
    websocket.onclose = () => {
      console.log("Websocket onclose");
    }

    /*
    ###################### ON ERROR #######################
     */
    websocket.onerror = (e) => {
      console.log("Websocket onerror", e)
    }

    /*
    ###################### ON MESSAGE #######################
     */
    websocket.onmessage = (message) => {
      console.log("Websocket onmessage");
      const data = JSON.parse(message.data);
    }
  })()
</script>
